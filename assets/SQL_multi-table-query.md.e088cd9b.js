import{_ as a,o as n,c as l,O as p}from"./chunks/framework.d7007f4b.js";const d=JSON.parse('{"title":"多表查询","description":"","frontmatter":{},"headers":[],"relativePath":"SQL/multi-table-query.md","filePath":"SQL/multi-table-query.md"}'),o={name:"SQL/multi-table-query.md"};function e(t,s,r,c,y,E){return n(),l("div",null,s[0]||(s[0]=[p(`<h1 id="多表查询" tabindex="-1">多表查询 <a class="header-anchor" href="#多表查询" aria-label="Permalink to &quot;多表查询&quot;">​</a></h1><h2 id="内连接-查询两张表交集的部分" tabindex="-1">内连接：查询两张表交集的部分 <a class="header-anchor" href="#内连接-查询两张表交集的部分" aria-label="Permalink to &quot;内连接：查询两张表交集的部分&quot;">​</a></h2><ul><li>隐式内连接<div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> student, dept </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">student</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dept_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dept</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> student, dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">student</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span></code></pre></div></li><li>显示内连接<div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">student</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">dept</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> student </span><span style="color:#F97583;">inner join</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">student</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dept_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dept</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">student</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> student </span><span style="color:#D73A49;">inner join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">student</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span></code></pre></div></li></ul><h2 id="外连接-完全包含左表或右表的数据" tabindex="-1">外连接：完全包含左表或右表的数据 <a class="header-anchor" href="#外连接-完全包含左表或右表的数据" aria-label="Permalink to &quot;外连接：完全包含左表或右表的数据&quot;">​</a></h2><ul><li>左连接<div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> student </span><span style="color:#F97583;">left outer join</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">student</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dept_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dept</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">//</span><span style="color:#E1E4E8;"> 会完全包含 左表 的数据</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> student </span><span style="color:#D73A49;">left outer join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">student</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">//</span><span style="color:#24292E;"> 会完全包含 左表 的数据</span></span></code></pre></div></li><li>右连接<div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> student </span><span style="color:#F97583;">right outer join</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">student</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dept_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dept</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">//</span><span style="color:#E1E4E8;"> 会完全包含 右表 的数据</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> student </span><span style="color:#D73A49;">right outer join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">student</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">//</span><span style="color:#24292E;"> 会完全包含 右表 的数据</span></span></code></pre></div></li></ul><h2 id="自连接-可以使用内连接-也可以使用外连接-必须要给表起别名" tabindex="-1">自连接：可以使用内连接，也可以使用外连接，必须要给表起别名 <a class="header-anchor" href="#自连接-可以使用内连接-也可以使用外连接-必须要给表起别名" aria-label="Permalink to &quot;自连接：可以使用内连接，也可以使用外连接，必须要给表起别名&quot;">​</a></h2><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- 内连接：取交集</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee a, employee b </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">a</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">manager_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">b</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- 外连接：</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">a</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;员工&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">b</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;领导&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee a </span><span style="color:#F97583;">left outer join</span><span style="color:#E1E4E8;"> employee b </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">a</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">manager_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">b</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 内连接：取交集</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee a, employee b </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">a</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">manager_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">b</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- 外连接：</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">a</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;员工&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">b</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;领导&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee a </span><span style="color:#D73A49;">left outer join</span><span style="color:#24292E;"> employee b </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">a</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">manager_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">b</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span></code></pre></div><h2 id="联合查询-union-union-all" tabindex="-1">联合查询：union / union all <a class="header-anchor" href="#联合查询-union-union-all" aria-label="Permalink to &quot;联合查询：union / union all&quot;">​</a></h2><ul><li>联合查询的多张表的列数必须保持一致，字段类型也需要保持一致</li><li>union all 直接将两张表的数据合并到一起，可能会有重复数据</li><li>union 会去重</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> student </span><span style="color:#F97583;">union all</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> teacher;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> student </span><span style="color:#D73A49;">union all</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> teacher;</span></span></code></pre></div><h2 id="子查询" tabindex="-1">子查询 <a class="header-anchor" href="#子查询" aria-label="Permalink to &quot;子查询&quot;">​</a></h2><ul><li>SQL语句中嵌套SELECT语句，称为 <em>嵌套查询</em>，又称 <em>子查询</em></li><li>根据查询结果不同，分为： <ul><li>标量子查询（子查询结果为单个值）</li><li>列子查询（查询结果为一列）：操作符有：IN / NOT IN / ANY / SOME / ALL</li><li>行子查询（查询结果为一行）：操作符有：= / &lt;&gt;不等于 / IN / NOT IN</li><li>表子查询（查询结果为多行多列）：操作符：IN</li></ul></li><li>根据子查询位置，分为 where之后、from之后、select之后</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- 标量子查询：查询销售部员工信息</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> dept_id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;销售部&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 列子查询 1: 查询销售部和市场部的员工信息</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;">  dept_id </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;销售部&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;市场部&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 列子查询 2: 查询比财务部工资最高的员工工资还要高的员工信息</span></span>
<span class="line"><span style="color:#6A737D;">-- 先找到财务部ID  再找到财务部工资  最后通过 all查询</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> salary </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> all (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> salary </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> dept_id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;财务部&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#6A737D;">-- 列子查询 3：查询比研发部任意一人工资高的员工信息</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> salary </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> some ( </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> salary </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> dept_id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> id </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;研发部&#39;</span><span style="color:#E1E4E8;">) );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 行子查询：查询与张无忌薪资及直属领导相同的员工信息</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> (salary, manager_id) </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> salary, manager_id </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;张无忌&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 表子查询 1：查询与鹿杖客和宋远桥薪资及职位相同的员工信息</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> (job, salary) </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> ( </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> job, salary </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;鹿杖客&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;宋远桥&#39;</span><span style="color:#E1E4E8;"> );</span></span>
<span class="line"><span style="color:#6A737D;">-- 表子查询 2：查询2006-01-01之后入职的员工信息及其部门信息</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> e.</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">, dept.</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> employee </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> entrydate </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;2006-01-01&#39;</span><span style="color:#E1E4E8;">) e </span><span style="color:#F97583;">left join</span><span style="color:#E1E4E8;"> dept </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">e</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dept_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dept</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 标量子查询：查询销售部员工信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> dept_id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> id </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;销售部&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 列子查询 1: 查询销售部和市场部的员工信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;">  dept_id </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> id </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;销售部&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">or</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;市场部&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 列子查询 2: 查询比财务部工资最高的员工工资还要高的员工信息</span></span>
<span class="line"><span style="color:#6A737D;">-- 先找到财务部ID  再找到财务部工资  最后通过 all查询</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> all (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> dept_id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> id </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;财务部&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#6A737D;">-- 列子查询 3：查询比研发部任意一人工资高的员工信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> some ( </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> dept_id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> id </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;研发部&#39;</span><span style="color:#24292E;">) );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 行子查询：查询与张无忌薪资及直属领导相同的员工信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> (salary, manager_id) </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> salary, manager_id </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;张无忌&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 表子查询 1：查询与鹿杖客和宋远桥薪资及职位相同的员工信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> (job, salary) </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> ( </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> job, salary </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;鹿杖客&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">or</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;宋远桥&#39;</span><span style="color:#24292E;"> );</span></span>
<span class="line"><span style="color:#6A737D;">-- 表子查询 2：查询2006-01-01之后入职的员工信息及其部门信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> e.</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">, dept.</span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> employee </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> entrydate </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;2006-01-01&#39;</span><span style="color:#24292E;">) e </span><span style="color:#D73A49;">left join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">e</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span></code></pre></div>`,13)]))}const F=a(o,[["render",e]]);export{d as __pageData,F as default};

import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.ff4c43a7.js";const A=JSON.parse('{"title":"约束","description":"","frontmatter":{},"headers":[],"relativePath":"SQL/constraint.md","filePath":"SQL/constraint.md"}'),p={name:"SQL/constraint.md"},o=l(`<h1 id="约束" tabindex="-1">约束 <a class="header-anchor" href="#约束" aria-label="Permalink to &quot;约束&quot;">​</a></h1><ul><li>非空约束 -&gt; not null</li><li>唯一约束 -&gt; unique</li><li>主键约束 -&gt; primary key</li><li>默认约束 -&gt; default</li><li>检查约束（8.0.16版本后） -&gt; check</li><li>外键约束 -&gt; foreign key <ul><li>删除和更新行为 <ol><li>no action 当在父表中删除/更新对应记录时，首先检查是否有对应外键，如果有则不允许删除/更新</li><li>restrict 当在父表中删除/更新对应记录时，首先检查是否有对应外键，如果有则不允许删除/更新</li><li>cascade 当在父表中删除/更新对应记录时，首先检查是否有对应外键，如果有则 也删除/更新 外键在子表中的记录</li><li>set null 当在父表中删除对应记录时，首先检查是否有对应外键，如果有则设置子表中该外键值为NULL(要求该外键允许取NULL)</li><li>set default 父表有变更时，子表将外键列设置成一个默认的值(Innodb不支持)</li></ol></li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- 添加外键</span></span>
<span class="line"><span style="color:#F97583;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> 表名 </span><span style="color:#F97583;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">constraint</span><span style="color:#E1E4E8;"> 外键名称 </span><span style="color:#F97583;">foreign key</span><span style="color:#E1E4E8;">(外键字段名) </span><span style="color:#F97583;">references</span><span style="color:#E1E4E8;"> 主表(主表列名);</span></span>
<span class="line"><span style="color:#F97583;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> emp </span><span style="color:#F97583;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">constraint</span><span style="color:#E1E4E8;"> fk_emp_dept_id </span><span style="color:#F97583;">foreign key</span><span style="color:#E1E4E8;">(dept_id) </span><span style="color:#F97583;">references</span><span style="color:#E1E4E8;"> dept(id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> emp </span><span style="color:#F97583;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">constraint</span><span style="color:#E1E4E8;"> fk_emp_dept_id </span><span style="color:#F97583;">foreign key</span><span style="color:#E1E4E8;">(dept_id) </span><span style="color:#F97583;">references</span><span style="color:#E1E4E8;"> dept(id) </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">update</span><span style="color:#E1E4E8;"> cascade </span><span style="color:#F97583;">on delete cascade</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> emp </span><span style="color:#F97583;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">constraint</span><span style="color:#E1E4E8;"> fk_emp_dept_id </span><span style="color:#F97583;">foreign key</span><span style="color:#E1E4E8;">(dept_id) </span><span style="color:#F97583;">references</span><span style="color:#E1E4E8;"> dept(id) </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">on delete</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">null</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 删除外键</span></span>
<span class="line"><span style="color:#F97583;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> emp </span><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">foreign key</span><span style="color:#E1E4E8;"> fk_emp_dept_id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 添加外键</span></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">constraint</span><span style="color:#24292E;"> 外键名称 </span><span style="color:#D73A49;">foreign key</span><span style="color:#24292E;">(外键字段名) </span><span style="color:#D73A49;">references</span><span style="color:#24292E;"> 主表(主表列名);</span></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">constraint</span><span style="color:#24292E;"> fk_emp_dept_id </span><span style="color:#D73A49;">foreign key</span><span style="color:#24292E;">(dept_id) </span><span style="color:#D73A49;">references</span><span style="color:#24292E;"> dept(id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">constraint</span><span style="color:#24292E;"> fk_emp_dept_id </span><span style="color:#D73A49;">foreign key</span><span style="color:#24292E;">(dept_id) </span><span style="color:#D73A49;">references</span><span style="color:#24292E;"> dept(id) </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">update</span><span style="color:#24292E;"> cascade </span><span style="color:#D73A49;">on delete cascade</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">constraint</span><span style="color:#24292E;"> fk_emp_dept_id </span><span style="color:#D73A49;">foreign key</span><span style="color:#24292E;">(dept_id) </span><span style="color:#D73A49;">references</span><span style="color:#24292E;"> dept(id) </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">update</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">on delete</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 删除外键</span></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">foreign key</span><span style="color:#24292E;"> fk_emp_dept_id;</span></span></code></pre></div></li></ul>`,2),e=[o];function t(c,r,y,E,i,d){return n(),a("div",null,e)}const D=s(p,[["render",t]]);export{A as __pageData,D as default};
